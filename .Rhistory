mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore") %>%
select(gis_object_id, county_name, aadt_2013, aadt_current, aadt_pct_change, aawdt_2013, aawdt_current, aawdt_pct_change)
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore") %>%
select(gis_object_id, county_name, functional_class, aadt_2013, aadt_current, aadt_pct_change, aawdt_2013, aawdt_current, aawdt_pct_change)
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore") %>%
select(gis_object_id, county_name, functional_class, aadt_2013, aadt_current, aadt_pct_change, aawdt_2013, aawdt_current, aawdt_pct_change) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore") %>%
select(gis_object_id, county_name, aadt_current, aawdt_current) %>%
filter(functional_class == "Interstate")
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore") %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
cat('<img![Interstates going in and out of Baltimore City marked on a map](baltcity_interstates.png)/>')
![Interstates going in and out of Baltimore City marked on a map](baltcity_interstates.png)
View(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
filter(county_name == "Baltimore City") %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
#cleaning for names, and also grabbing all values that pertain to interstates, because the key bridge collapse will mostly affect interstate traffic patterns.
md_traffic_clean <- md_traffic %>%
select(gis_object_id, county_name, rural_urban, functional_class, aadt_2013, aadt_2014, aadt_2015, aadt_2016, aadt_2017, aadt_current, aawdt_2013, aawdt_2014, aawdt_2015, aawdt_2016, aawdt_2017, aawdt_2018, aawdt_current) %>%
filter(county_name == "Baltimore City")
view(md_traffic_clean)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
```{r}
cat(<iframe title="Interstates around Baltimore City could see more traffic after Key Bridge collapse" aria-label="Locator maps" id="datawrapper-chart-i6myt" src="https://datawrapper.dwcdn.net/i6myt/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="801" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current, aadt_pct_change, aawdt_pct_change) %>%
filter(functional_class == "Interstate")
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = (aadt_current-aadt_2013)/aadt_2013) %>%
mutate(aawdt_pct_change = (aawdt_current-aawdt_2013)/aawdt_2013) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current, aadt_pct_change, aawdt_pct_change) %>%
filter(functional_class == "Interstate") %>%
arrange(desc(aadt_pct_change))
view(interstate_balt)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = percent((aadt_current-aadt_2013)/aadt_2013)) %>%
mutate(aawdt_pct_change = percent((aawdt_current-aawdt_2013)/aawdt_2013)) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current, aadt_pct_change, aawdt_pct_change) %>%
filter(functional_class == "Interstate") %>%
arrange(desc(aadt_pct_change))
view(interstate_balt)
cat('<iframe title="Interstates around Baltimore City could see more traffic after Key Bridge collapse" aria-label="Locator maps" id="datawrapper-chart-i6myt" src="https://datawrapper.dwcdn.net/i6myt/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="801" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>')
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
library(formattable)
#census key -- i removed my personal key
census_api_key(Sys.getenv("CENSUS_API_KEY"), install=TRUE, overwrite = TRUE)
#load in census data through my API
acs_vars <- load_variables("acs5", year = 2020)
#grab maryland section, divide by county by race for both 2010 and 2020. I want to get these both to see how diverse populations have changed over time in these counties.
x2020_md <- get_acs(geography = "county",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2020)
x2010_md <- get_acs(geography = "county",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2010)
#read in the html and extract all the tables
x20_results <- "https://elections.maryland.gov/elections/2020/results/general/gen_results_2020_4_by_county_07-1.html" %>%
read_html() %>%
html_table()
x20_results <- x20_results[[2]]
x16_results <- "https://elections.maryland.gov/elections/2016/results/general/gen_results_2016_4_by_county_07-1.html" %>%   read_html() %>%
html_table()
x16_results <- x16_results[[1]]
x12_results <- "https://elections.maryland.gov/elections/2012/results/general/gen_results_2012_4_by_county_07-1.html" %>%
read_html() %>%
html_table()
x12_results <- x12_results[[1]]
#had to do a bit more cleaning on this table -- for some reason, it recognized information above the table as an actual table, and i had to do a lot more cleaning to ensure numbers were recognized by the program.
x20_results_clean <- x20_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),  #making things numeric that were previously not
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
By_Mail = as.numeric(gsub("[^0-9.]", "", `By Mail`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percent = as.numeric(gsub("[^0-9.]", "", Percent))
) %>%
clean_names()
x16_results_clean <- x16_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
Absentee_Provisional = as.numeric(gsub("[^0-9.]", "", `Absentee / Provisional`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percentage = as.numeric(gsub("[^0-9.]", "", Percentage))
) %>%
clean_names()
x12_results_clean <- x12_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
Absentee_Provisional = as.numeric(gsub("[^0-9.]", "", `Absentee / Provisional`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percentage = as.numeric(gsub("[^0-9.]", "", Percentage))
) %>%
clean_names()
x20_gen_results <- x20_results_clean %>%
select(name, party, early_voting_2, election_day_2,by_mail_2,total,percent) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
by_mail = "by_mail_2")
x16_gen_results <- x16_results_clean %>%
select(name, party, early_voting_2, election_day_2,absentee_provisional_2,total,percentage) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
absentee_provisional = "absentee_provisional_2",
percent = "percentage")
x12_gen_results <- x12_results_clean %>%
select(name, party, early_voting_2, election_day_2, absentee_provisional_2, total, percentage) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
absentee_provisional = "absentee_provisional_2",
percent = "percentage")
#Based on this analysis with percentage, it appears that Carroll County has always skewed Republican in general elections since 2012. Interestingly enough, less of the voting population seems to have voted for the Republican candidates as the years have gone on. From a 64.8% percent voting for Romney to 63.4% for Trump in 2016 and a later 60% for Trump in 2020, support for Republican candidates has actually slightly waned. Can this be attributed to less people showing up to the polls, or some other reason? As I work in Carroll County, I'll use this analysis to inform my reporting.
#pull in data from the state elections
x12_result_md <- "https://elections.maryland.gov/elections/2012/results/general/gen_results_2012_4_001-.html" %>%
read_html() %>%
html_table()
x12_result_md <- x12_result_md[[1]]
x16_result_md <- "https://elections.maryland.gov/elections/2016/results/general/gen_results_2016_4_001-.html" %>%
read_html() %>%
html_table()
x16_result_md <- x16_result_md[[1]]
x20_result_md <- "https://elections.maryland.gov/elections/2020/results/general/gen_results_2020_4_001-.html" %>%
read_html() %>%
html_table()
x20_result_md <- x20_result_md[[2]]
head(x12_result_md)
head(x16_result_md)
head(x20_result_md)
#Based on these results, the percentage of voters in the state seems to have changed in regards to party support -- there was about 62% of votes for Obama and Biden in 2012, but in 2016, that support for democrats fell by about 2%. In 2020, it grew again to be 65.4% of voters in favor of the Democratic candidate. It appears that support for Republicans grew in 2016, but then fell once again in 2020.
#When we compare this to above in the Carroll County sections, it appears that support for Republicans has also waned in accordance with state trends. However, Carroll County still seems to be an outlier in terms of majority support for Republican candidates out of Maryland counties.
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
library(formattable)
#census key -- i removed my personal key
census_api_key(Sys.getenv("CENSUS_API_KEY"), install=TRUE, overwrite = TRUE)
#load in census data through my API
acs_vars <- load_variables("acs5", year = 2020)
#grab maryland section, divide by county by race for both 2010 and 2020. I want to get these both to see how diverse populations have changed over time in these counties.
x2020_md <- get_acs(geography = "county",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2020)
x2010_md <- get_acs(geography = "county",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2010)
#now want to filter out the counties! but first, i'll join the two dataframes. as mentioned before, i like doing this through the GEOID since it's very exact, but also joined by variables so i didn't get any duplicates.
md_total <- x2020_md %>%
inner_join(x2010_md, by = c("GEOID", "variable")) %>%
rename(estimate_2020 = estimate.x,
estimate_2010 = estimate.y,
name = "NAME.x") %>%
select(GEOID, name, variable, estimate_2020, estimate_2010)
#filter out other counties and mutate for pct_change and pct_whole, then i just am going to separate by county too! pct_change will evaluate how the percentage of that population has changed, while pct_whole values will tell me how each race has made up the total population in different years. i mutated a sum of the estimate to be able to calculate it!
demo_howard <- md_total %>%
filter(name == "Howard County, Maryland") %>%
mutate(howard_pct_change = (((estimate_2020-estimate_2010)/estimate_2010)*100)) %>%
mutate(all_2020 = sum(estimate_2020)) %>%
mutate(all_2010 = sum(estimate_2010)) %>%
mutate(howard_pct_whole_20 = percent(estimate_2020/all_2020)) %>%
mutate(howard_pct_whole_10 = percent(estimate_2010/all_2010))
demo_carroll <- md_total %>%
filter(name == "Carroll County, Maryland") %>%
mutate(carroll_pct_change = (((estimate_2020-estimate_2010)/estimate_2010)*100)) %>%
mutate(all_2020 = sum(estimate_2020)) %>%
mutate(all_2010 = sum(estimate_2010)) %>%
mutate(carroll_pct_whole_20 = percent(estimate_2020/all_2020)) %>%
mutate(carroll_pct_whole_10 = percent(estimate_2010/all_2010))
#now want to view both of my dataframes -- i liked having two separate ones since it was easier to read for me.
view(demo_carroll)
view(demo_howard)
#based on this information, it appears that both Howard County and Carroll County have become more diverse.
#In Howard County, the white population decreased from about 33% in 2010 to about 28% of the whole population in 2020. The Howard County Black population increased by almost 1%, the Asian population by nearly 3% and an almost 1% increase in Hispanic population out of the entire Howard County population.
#In Carroll County, the white population decreased from an about 47% of the whole population to about 46%. There wasn't too much increase in other races -- there was an about 1% increase in the Asian population of the whole and a less than 1% increase in the percentage of the whole population for all other races.
#now want to filter out the counties! but first, i'll join the two dataframes. as mentioned before, i like doing this through the GEOID since it's very exact, but also joined by variables so i didn't get any duplicates.
md_total <- x2020_md %>%
inner_join(x2010_md, by = c("GEOID", "variable")) %>%
rename(estimate_2020 = estimate.x,
estimate_2010 = estimate.y,
name = "NAME.x") %>%
select(GEOID, name, variable, estimate_2020, estimate_2010)
#filter out other counties and mutate for pct_change and pct_whole, then i just am going to separate by county too! pct_change will evaluate how the percentage of that population has changed, while pct_whole values will tell me how each race has made up the total population in different years. i mutated a sum of the estimate to be able to calculate it!
demo_howard <- md_total %>%
filter(name == "Howard County, Maryland") %>%
mutate(howard_pct_change = (((estimate_2020-estimate_2010)/estimate_2010)*100)) %>%
mutate(all_2020 = sum(estimate_2020)) %>%
mutate(all_2010 = sum(estimate_2010)) %>%
mutate(howard_pct_whole_20 = percent(estimate_2020/all_2020)) %>%
mutate(howard_pct_whole_10 = percent(estimate_2010/all_2010))
demo_carroll <- md_total %>%
filter(name == "Carroll County, Maryland") %>%
mutate(carroll_pct_change = (((estimate_2020-estimate_2010)/estimate_2010)*100)) %>%
mutate(all_2020 = sum(estimate_2020)) %>%
mutate(all_2010 = sum(estimate_2010)) %>%
mutate(carroll_pct_whole_20 = percent(estimate_2020/all_2020)) %>%
mutate(carroll_pct_whole_10 = percent(estimate_2010/all_2010))
#now want to view both of my dataframes -- i liked having two separate ones since it was easier to read for me.
view(demo_carroll)
view(demo_howard)
#based on this information, it appears that both Howard County and Carroll County have become more diverse.
#In Howard County, the white population decreased from about 33% in 2010 to about 28% of the whole population in 2020. The Howard County Black population increased by almost 1%, the Asian population by nearly 3% and an almost 1% increase in Hispanic population out of the entire Howard County population.
#In Carroll County, the white population decreased from an about 47% of the whole population to about 46%. There wasn't too much increase in other races -- there was an about 1% increase in the Asian population of the whole and a less than 1% increase in the percentage of the whole population for all other races.
#maryland 2020 and maryland 2010 demographics -- i can pull from the same parts of the Census API since I'm just choosing a different geographical region, such as state instead of county.
x2020_state <- get_acs(geography = "state",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2020)
x2010_state <- get_acs(geography = "state",
variables = c(white = "B02001_002",
black = "B02001_003",
american_ind = "B02001_004",
asian = "B02001_005",
pacif_islander = "B02001_006",
hispanic = "B03003_003"),
state = "MD",
year = 2010)
head(x2010_state)
head(x2020_state)
#joining dataframes, mutating to make new columns -- going to make pct_change to see how population has overall changed, look at pct_total to see how the total demographic breakdown has also changed as a percent of the whole population. i also made a sum column so i could calculate pct_whole.
state_total <- x2020_state %>%
inner_join(x2010_state, by = c("GEOID", "variable")) %>%
rename(estimate_2020 = estimate.x,
estimate_2010 = estimate.y,
name = "NAME.x") %>%
mutate(state_pct_change = (percent((estimate_2020-estimate_2010)/estimate_2010))) %>%
mutate(total_2010 = sum(estimate_2010)) %>%
mutate(total_2020 = sum(estimate_2020)) %>%
mutate(state_pct_total_2020 = percent(estimate_2020/total_2020)) %>%
mutate(state_pct_total_2010 = percent(estimate_2010/total_2010)) %>%
select(GEOID, name, variable, estimate_2020, total_2020,state_pct_total_2020,estimate_2010,total_2010,state_pct_total_2010,state_pct_change)
view(state_total)
#The white population in Maryland out of a percentage of the whole changed from about 30% in 2010 to about 28% in 2020. The Hispanic population out of whole from 2010 to 2020 increased by about 1%, but the rest of the races in Maryland changed by less than 1% of the percentage of the whole. These changes are similar to how it is in Howard and Carroll counties, with the white populations slightly decreasing -- Maryland, Howard County and Carroll County all are predominantly white as well.
#joining the state with carroll and cleaning up the names
state_carroll <- demo_carroll %>%
inner_join(state_total, by = "variable") %>%
rename(x20_carroll_estimate = "estimate_2020.x",
x10_carroll_estimate = "estimate_2010.x",
x20_state_estimate = "estimate_2020.y",
x10_state_estimate = "estimate_2010.y"
) %>%
select(variable, x20_carroll_estimate, x10_carroll_estimate, carroll_pct_change, x20_state_estimate, x10_state_estimate, state_pct_change)
state_howard_carroll <- state_carroll %>%
inner_join(demo_howard, by = "variable") %>%
rename(x20_howard_estimate = "estimate_2020",
x10_howard_estimate = "estimate_2010") %>%
select(variable, x20_carroll_estimate, x10_carroll_estimate, carroll_pct_change, x20_howard_estimate, x10_howard_estimate, howard_pct_change, x20_state_estimate, x10_state_estimate, state_pct_change)
head(state_howard_carroll)
cat('<div class="flourish-embed flourish-chart" data-src="visualisation/17869350"><script src="https://public.flourish.studio/resources/embed.js"></script></div>')
#read in the html and extract all the tables
x20_results <- "https://elections.maryland.gov/elections/2020/results/general/gen_results_2020_4_by_county_07-1.html" %>%
read_html() %>%
html_table()
x20_results <- x20_results[[2]]
x16_results <- "https://elections.maryland.gov/elections/2016/results/general/gen_results_2016_4_by_county_07-1.html" %>%   read_html() %>%
html_table()
x16_results <- x16_results[[1]]
x12_results <- "https://elections.maryland.gov/elections/2012/results/general/gen_results_2012_4_by_county_07-1.html" %>%
read_html() %>%
html_table()
x12_results <- x12_results[[1]]
#had to do a bit more cleaning on this table -- for some reason, it recognized information above the table as an actual table, and i had to do a lot more cleaning to ensure numbers were recognized by the program.
x20_results_clean <- x20_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),  #making things numeric that were previously not
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
By_Mail = as.numeric(gsub("[^0-9.]", "", `By Mail`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percent = as.numeric(gsub("[^0-9.]", "", Percent))
) %>%
clean_names()
x16_results_clean <- x16_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
Absentee_Provisional = as.numeric(gsub("[^0-9.]", "", `Absentee / Provisional`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percentage = as.numeric(gsub("[^0-9.]", "", Percentage))
) %>%
clean_names()
x12_results_clean <- x12_results %>%
mutate(
Early_Voting = as.numeric(gsub("[^0-9.]", "", `Early Voting`)),
Election_Day = as.numeric(gsub("[^0-9.]", "", `Election Day`)),
Absentee_Provisional = as.numeric(gsub("[^0-9.]", "", `Absentee / Provisional`)),
Total = as.numeric(gsub("[^0-9.]", "", Total)),
Percentage = as.numeric(gsub("[^0-9.]", "", Percentage))
) %>%
clean_names()
x20_gen_results <- x20_results_clean %>%
select(name, party, early_voting_2, election_day_2,by_mail_2,total,percent) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
by_mail = "by_mail_2")
x16_gen_results <- x16_results_clean %>%
select(name, party, early_voting_2, election_day_2,absentee_provisional_2,total,percentage) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
absentee_provisional = "absentee_provisional_2",
percent = "percentage")
x12_gen_results <- x12_results_clean %>%
select(name, party, early_voting_2, election_day_2, absentee_provisional_2, total, percentage) %>%
rename(early_voting = "early_voting_2",
election_day = "election_day_2",
absentee_provisional = "absentee_provisional_2",
percent = "percentage")
#Based on this analysis with percentage, it appears that Carroll County has always skewed Republican in general elections since 2012. Interestingly enough, less of the voting population seems to have voted for the Republican candidates as the years have gone on. From a 64.8% percent voting for Romney to 63.4% for Trump in 2016 and a later 60% for Trump in 2020, support for Republican candidates has actually slightly waned. Can this be attributed to less people showing up to the polls, or some other reason? As I work in Carroll County, I'll use this analysis to inform my reporting.
x20_gen_results
x16_gen_results
x12_gen_results
#pull in data from the state elections
x12_result_md <- "https://elections.maryland.gov/elections/2012/results/general/gen_results_2012_4_001-.html" %>%
read_html() %>%
html_table()
x12_result_md <- x12_result_md[[1]]
x16_result_md <- "https://elections.maryland.gov/elections/2016/results/general/gen_results_2016_4_001-.html" %>%
read_html() %>%
html_table()
x16_result_md <- x16_result_md[[1]]
x20_result_md <- "https://elections.maryland.gov/elections/2020/results/general/gen_results_2020_4_001-.html" %>%
read_html() %>%
html_table()
x20_result_md <- x20_result_md[[2]]
head(x12_result_md)
head(x16_result_md)
head(x20_result_md)
#Based on these results, the percentage of voters in the state seems to have changed in regards to party support -- there was about 62% of votes for Obama and Biden in 2012, but in 2016, that support for democrats fell by about 2%. In 2020, it grew again to be 65.4% of voters in favor of the Democratic candidate. It appears that support for Republicans grew in 2016, but then fell once again in 2020.
#When we compare this to above in the Carroll County sections, it appears that support for Republicans has also waned in accordance with state trends. However, Carroll County still seems to be an outlier in terms of majority support for Republican candidates out of Maryland counties.
cat('<iframe src="<div class="flourish-embed flourish-chart" data-src="visualisation/17783968"><script src="https://public.flourish.studio/resources/embed.js"></script></div>"></iframe>')
#grab the data by county for median income
x20_md_median_income <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020)
x10_md_median_income <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2010)
#clean the data! I want to filter out for the specific counties I want and do some cleanign to get all that I want.
md_median_income_total <- x20_md_median_income %>%
inner_join(x10_md_median_income, by="GEOID", "variable") %>%
rename(name = "NAME.x",
x20_estimate = "estimate.x",
x10_estimate = "estimate.y",
variable = "variable.x")
howard_med_income <- md_median_income_total %>%
filter(name == "Howard County, Maryland") %>%
select(name, x20_estimate, x10_estimate, variable) %>%
mutate(pct_change = (((x20_estimate - x10_estimate)/x10_estimate)*100)) %>%
arrange(desc(pct_change))
carroll_med_income <- md_median_income_total %>%
filter(name == "Carroll County, Maryland") %>%
select(name, x20_estimate, x10_estimate, variable) %>%
mutate(pct_change = (((x20_estimate - x10_estimate)/x10_estimate)*100)) %>%
arrange(desc(pct_change))
#The household median income in Carroll County increased by about 22%, according to Census Data. Howard also experienced an increase in household median income by about 20%. Now, I am left asking if this is something similar to the entire state?
#clean the data! I want to filter out for the specific counties I want and do some cleanign to get all that I want.
md_median_income_total <- x20_md_median_income %>%
inner_join(x10_md_median_income, by="GEOID", "variable") %>%
rename(name = "NAME.x",
x20_estimate = "estimate.x",
x10_estimate = "estimate.y",
variable = "variable.x")
howard_med_income <- md_median_income_total %>%
filter(name == "Howard County, Maryland") %>%
select(name, x20_estimate, x10_estimate, variable) %>%
mutate(pct_change = (((x20_estimate - x10_estimate)/x10_estimate)*100)) %>%
arrange(desc(pct_change))
carroll_med_income <- md_median_income_total %>%
filter(name == "Carroll County, Maryland") %>%
select(name, x20_estimate, x10_estimate, variable) %>%
mutate(pct_change = (((x20_estimate - x10_estimate)/x10_estimate)*100)) %>%
arrange(desc(pct_change))
#The household median income in Carroll County increased by about 22%, according to Census Data. Howard also experienced an increase in household median income by about 20%. Now, I am left asking if this is something similar to the entire state?
head(howard_med_income)
head(carroll_med_income)
#pull census data
x20_state_median_income <- get_acs(geography = "state",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020)
x10_state_median_income <- get_acs(geography = "state",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2010)
state_med_income <- x20_state_median_income %>%
inner_join(x10_state_median_income, by = c("GEOID", "variable")) %>%
rename(estimate_2020 = estimate.x,
estimate_2010 = estimate.y,
name = "NAME.x") %>%
mutate(pct_change = (percent((estimate_2020-estimate_2010)/estimate_2010))) %>%
select(GEOID, name, variable, estimate_2020, estimate_2010,pct_change)
#The household median income has increased by about 23%, which is a similar trend to that in Howard and Carroll Counties.
head(state_med_income)
md_traffic <- read_csv("mdot_daily_traffic.csv") %>%
clean_names()
print(md_traffic)
#cleaning for names, and also grabbing all values that pertain to interstates, because the key bridge collapse will mostly affect interstate traffic patterns.
md_traffic_clean <- md_traffic %>%
select(gis_object_id, county_name, rural_urban, functional_class, aadt_2013, aadt_2014, aadt_2015, aadt_2016, aadt_2017, aadt_current, aawdt_2013, aawdt_2014, aawdt_2015, aawdt_2016, aawdt_2017, aawdt_2018, aawdt_current) %>%
filter(county_name == "Baltimore City")
view(md_traffic_clean)
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = percent((aadt_current-aadt_2013)/aadt_2013)) %>%
mutate(aawdt_pct_change = percent((aawdt_current-aawdt_2013)/aawdt_2013)) %>%
select(gis_object_id, functional_class, county_name, aadt_current, aawdt_current, aadt_pct_change, aawdt_pct_change) %>%
filter(functional_class == "Interstate") %>%
arrange(desc(aadt_pct_change))
view(interstate_balt)
#since 2013, multiple routes on the interstates have seen increased traffic by more than 100%. This is a large window of time, but still shows the increased rate of traffic of interstates going in and out of Baltimore City.
interstate_balt <- md_traffic_clean %>%
mutate(aadt_pct_change = percent((aadt_current-aadt_2013)/aadt_2013)) %>%
mutate(aawdt_pct_change = percent((aawdt_current-aawdt_2013)/aawdt_2013)) %>%
select(gis_object_id, functional_class, county_name, aadt_2013, aadt_current, aawdt_2013, aawdt_current, aadt_pct_change, aawdt_pct_change) %>%
filter(functional_class == "Interstate") %>%
arrange(desc(aadt_pct_change))
view(interstate_balt)
#since 2013, multiple routes on the interstates have seen increased traffic by more than 100%. This is a large window of time, but still shows the increased rate of traffic of interstates going in and out of Baltimore City.
cat('<iframe title="Interstates around Baltimore City could see more traffic after Key Bridge collapse" aria-label="Locator maps" id="datawrapper-chart-i6myt" src="https://datawrapper.dwcdn.net/i6myt/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 100% !important; border: none;" height="801" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>')
install("tinytext")
install.packages("tinytext")
```
quarto install tinytex
install(tinytext)
install.packages("tinytex")
library(tinytex)
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
library(formattable)
library(tinytex)
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
library(formattable)
library(tinytex)
install.packages("latex")
