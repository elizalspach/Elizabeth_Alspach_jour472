library(janitor)
library(tidyverse)
arcos <- read_csv("arcos.cvs") %>%
clean_names()
arcos <- read_rds("arcos.rds") %>%
clean_names()
library(janitor)
library(rio)
library(tidyverse)
arcos <- read_rds("arcos.rds") %>%
clean_names()
arcos <- read_rds("arcos.rds") #%>%
arcos <- read_rds("arcos.rds")
setwd("~/GitHub/Elizabeth_Alspach_jour472/lab_07pt2/lab_07")
arcos <- read_rds("arcos.rds")
setwd("~/GitHub/Elizabeth_Alspach_jour472/lab_07pt2/lab_07/data")
arcos <- read_csv("data/arcos.csv") %>%
clean_names()
x2014_county_pop <- read_csv("county_population_2014.csv") %>%
clean_names()
arcos <- read_csv("data/arcos.csv") %>%
clean_names()
x2014_county_pop <- read_csv("data/county_population_2014.csv") %>%
clean_names()
x2014_state_pop <- read_csv("data/state_population_2014.csv") %>%
clean_names()
state_crosswalk <- read_csv("data/state_crosswalk.csv") %>%
clean_names()
View(arcos)
View(x2014_state_pop)
View(x2014_county_pop)
View(state_crosswalk)
#county/city receiving most total opioid pills
x2014_county_pop <- arcos %>%
left_join(x2014_county_pop, by="geoid")
#county/city receiving most total opioid pills
x2014_county_pop <- arcos %>%
left_join(x2014_county_pop, by="countyfips")
#county/city receiving most total opioid pills
arcos_sum <- arcos %>%
group_by(buyer_county == sum( 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014, na.rm=TRUE)) %>%
slice_max(arcos_sum)
#county/city receiving most total opioid pills
arcos_sum <- arcos %>%
group_by(buyer_county == sum( 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014, na.rm=TRUE)) %>%
#county/city receiving most total opioid pills
arcos_sum <- arcos %>%
group_by(buyer_county == sum( 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014, na.rm=TRUE))
slice_max(arcos_sum)
#county/city receiving most total opioid pills
arcos_sum <- arcos %>%
group_by(buyer_county == sum( 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014, na.rm=TRUE))
arrange(desc(arcos_sum))
#county/city receiving most total opioid pills
arcos_sum <- arcos %>%
group_by(total_pills == sum( 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014, na.rm=TRUE))
arrange(desc(arcos_sum))
#county/city receiving most total opioid pills
x2014_county_pop <- arcos %>%
left_join(x2014_county_pop, by="countyfips")
#county/city receiving most total opioid pills
arcos_county <- x2014_county_pop %>%
inner_join(arcos, by="countyfips")
#county/city receiving most total opioid pills
arcos_county <- x2014_county_pop %>%
inner_join(arcos, by="geoid")
#county/city receiving most total opioid pills
arcos_county <- x2014_county_pop %>%
inner_join(arcos, by="geoid")
#county/city receiving most total opioid pills
arcos <- x2014_county_pop %>%
inner_join(arcos, by="geoid")
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
inner_join(x2014_county_pop, by="geoid")
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
inner_join(x2014_county_pop, by="countyfips")
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
left_join(x2014_county_pop, by="countyfips")
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
left_join(x2014_county_pop, by="geoid")
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
group_by(countyfips,buyer_county,buyer_state) %>%
summarise(
total_pills = sum(total_pills)
) %>%
innter_join(x2014_county_pop, by=c("countyfips"="geoid")) %>%
mutate(pills_per_person = total_pills/total_population_2014) %>%
arrange(desc(pills_per_person))
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
group_by(countyfips,buyer_county,buyer_state) %>%
summarise(
total_pills = sum(total_pills)
) %>%
inter_join(x2014_county_pop, by=c("countyfips"="geoid")) %>%
mutate(pills_per_person = total_pills/total_population_2014) %>%
arrange(desc(pills_per_person))
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
group_by(countyfips,buyer_county,buyer_state) %>%
summarise(
total_pills = sum(total_pills)
) %>%
inner_join(x2014_county_pop, by=c("countyfips"="geoid")) %>%
mutate(pills_per_person = total_pills/total_population_2014) %>%
arrange(desc(pills_per_person))
arcos_county
library(janitor)
library(rio)
library(tidyverse)
arcos <- read_csv("data/arcos.csv") %>%
clean_names()
x2014_county_pop <- read_csv("data/county_population_2014.csv") %>%
clean_names()
x2014_state_pop <- read_csv("data/state_population_2014.csv") %>%
clean_names()
state_crosswalk <- read_csv("data/state_crosswalk.csv") %>%
clean_names()
#county/city receiving most total opioid pills
arcos_county <- arcos %>%
group_by(countyfips,buyer_county,buyer_state) %>%
summarise(
total_pills = sum(total_pills)
) %>%
inner_join(x2014_county_pop, by=c("countyfips"="geoid")) %>%
mutate(pills_per_person = total_pills/total_population_2014) %>%
arrange(desc(pills_per_person))
arcos_county
View(x2014_state_pop)
#table one
total_2006 <- arcos %>%
filter(year=="2006")
total_2014 <- arcos %>%
filter(year=="2014")
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="state")
View(total_2006)
View(total_2014)
#table one
total_2006 <- arcos %>%
filter(year=="2006")
total_2014 <- arcos %>%
filter(year=="2014")
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state")
arcos_combo
View(total_2014)
#table one
total_2006 <- arcos %>%
filter(year=="2006")
total_2014 <- arcos %>%
filter(year=="2014")
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state")
arcos_combo2 <- state_crosswalk %>%
inner_join(arcos_combo, by="state")
View(state_crosswalk)
#table one
total_2006 <- arcos %>%
filter(year=="2006")
total_2014 <- arcos %>%
filter(year=="2014")
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state")
arcos_combo2 <- state_crosswalk %>%
inner_join(arcos_combo, by="state_name")
View(arcos_combo)
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo2 <- state_crosswalk %>%
inner_join(arcos_combo, by="state_name") %>%
clean_names()
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo2 <- arcos_combo %>%
inner_join(state_crosswalk, by="state_name") %>%
clean_names()
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo2 <- arcos_combo %>%
inner_join(state_crosswalk, by="buyer_state") %>%
clean_names()
View(state_crosswalk)
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo2 <- arcos_combo %>%
inner_join(state_crosswalk, by="buyer_abb") %>%
clean_names()
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo2 <- arcos_combo %>%
inner_join(state_crosswalk, by="state_abb") %>%
clean_names()
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo_sidewalk <- arcos_combo %>%
inner_join(state_crosswalk, by=c("buyer_state"="state_abb"))
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="buyer_state") %>%
clean_names()
arcos_combo_sidewalk <- arcos_combo %>%
inner_join(state_crosswalk, by=c("buyer_state"="state_abb"))
view(arcos_combo_sidewalk)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=(((total_pills_x/total_pills_y)/total_pills_y)))*100)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=(((((total_pills_x/total_pills_y)/total_pills_y)))*100)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=((((total_pills_x/total_pills_y)/total_pills_y)*100))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=((((total_pills_x/total_pills_y)/total_pills_y)*100)))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=((((total_pills_x/total_pills_y)/total_pills_y)*100)))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
#select(state_name, buyer_county_x, year_x, total_pills_x, buyer_county_y, year_y, total_pills_y)
mutate(pct_change=((((total_pills_x/total_pills_y)/total_pills_y)*100)))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
mutate(pct_change=((((total_pills_x-total_pills_y)/total_pills_y)*100)))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_x-total_pills_y)/total_pills_y)*100))
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,year_x,year_y,pct_change) %>%
slice_max(pct_change, n=5)
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,year_x,year_y,pct_change) %>%
slice_max(pct_change, n=5)
#make a minimum table
arcos_combo_sidewalk %>%
select(state_name,year_x,year_y,pct_change) %>%
slice_min(pct_change, n=5)
#make a minimum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_min(pct_change, n=5)
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_max(pct_change, n=5)
View(arcos_combo)
View(total_2014)
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
#table 2
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
#combine both tables
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="countyfips") %>%
clean_names()
#combine with sidewalk
arcos_combo_sidewalk <- arcos_combo %>%
inner_join(state_crosswalk, by=c("buyer_state"="state_abb"))
View(arcos_combo)
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
#table 2
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
#combine both tables
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="countyfips") %>%
clean_names()
#combine with sidewalk
arcos_combo_sidewalk <- arcos_combo %>%
inner_join(state_crosswalk, by=c("buyer_state.x"="state_abb"))
#table one
total_2006 <- arcos %>%
filter(year=="2006") %>%
clean_names()
#table 2
total_2014 <- arcos %>%
filter(year=="2014") %>%
clean_names()
#combine both tables
arcos_combo <- total_2006 %>%
inner_join(total_2014, by="countyfips") %>%
clean_names()
#combine with sidewalk
arcos_combo_sidewalk <- arcos_combo %>%
inner_join(state_crosswalk, by=c("buyer_state_x"="state_abb"))
view(arcos_combo_sidewalk)
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_max(pct_change, n=5)
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_max(pct_change, n=5)
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
group_by(buyer_county_x) %>%
summarize(sum(total_pills_x)) %>%
summarize(sum(total_pills_y)) %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
group_by(buyer_county_x) %>%
summarize(sum(total_pills_x)) %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
options(scipen=999)
#calculate the percentage change between 2006 and 2014
arcos_combo_sidewalk <- arcos_combo_sidewalk %>%
mutate(pct_change=(((total_pills_y-total_pills_x)/total_pills_x)*100))
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_max(pct_change, n=5)
#make a minimum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
slice_min(pct_change, n=5)
#make a maximum table
arcos_combo_sidewalk %>%
select(state_name,total_pills_x,total_pills_y,pct_change) %>%
group_by(total_pills_x, total_pills_y) %>%
summarize(total_pills_x, total_pills_y) %>%
slice_max(pct_change, n=5)
#make a maximum table
arcos_combo_sidewalk %>%
group_by(total_pills_x, total_pills_y) %>%
summarize(total_pills_x, total_pills_y) %>%
slice_max(pct_change, n=5)
