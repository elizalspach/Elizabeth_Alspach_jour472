top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
arrests <- SF %>%
filter(disposition == c("ARR"))
SF <- read_csv("SF_311.csv")
library(tidyverse)
SF <- read_csv("SF_311.csv")
#This cleans column names
SF <- janitor::clean_names(SF)
#This processes dates for analysis
SF$call_date2 <- as.Date(SF$call_date)
SF$call_date2 <- lubridate::mdy(SF$call_date)
#This creates a new column for year
SF$year <- lubridate::year(SF$call_date2)
glimpse(SF)
years <- SF %>%
count(year) %>%
group_by(year)
years
years %>%
ggplot() +
geom_bar(aes(x=year, weight=n))
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n))
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip()
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal()
#install.packages('ggthemes')
library(ggthemes)
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal() +
theme_economist()
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal() +
theme_economist() +
labs(
title="311 Calls, San Francisco",
x = "total 311 calls",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
years %>%
ggplot(aes(x=year, y=n, weight=n)) +
coord_flip() +
theme_economist() +
geom_col()+
geom_text(aes(label=n), hjust = -.1, size = 2.5) +
labs(
title="311 Calls, San Francisco",
x = "total 311 calls",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
years %>%
ggplot() +
geom_line(aes(x=year, y=n))
ggplot(dispo, aes(year, n, fill = disposition)) +
geom_col(position = "dodge")
dispo <- SF %>%
filter(disposition == c("CAN", "CIT", "ADM"))
dispo <- dispo %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
dispo_pivot <- dispo %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
ggplot(dispo, aes(year, n, fill = disposition)) +
geom_col(position = "dodge")
arrests <- SF %>%
filter(disposition == c("ARR"))
arrests <- arrests %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
arrests_pivot <- arrests %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
arrests <- SF %>%
filter(disposition == c("ARR"))
arrests <- arrests %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
arrests_pivot <- arrests %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
arrests <- SF %>%
filter(disposition == c("ARR"))
arrests <- arrests %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
arrests_pivot <- arrests %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
arrests %>%
ggplot(aes(x=year, y=n, weight=n, fill=n)) +
geom_col()+
geom_text(aes(label=n), hjust = -.1, size = 2.5) +
labs(
title="San Francisco Arrests",
x = "year",
y = "total arrests",
caption = "source: SF PD Arrest Data, 2016-2019")
all_dispo <- table(SF$disposition)
as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
arrests <- SF %>%
filter(disposition == c("ARR"))
arrests <- arrests %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
arrests_pivot <- arrests %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
view(arrests_pivot)
all_dispo <- table(SF$disposition)
as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo%>%
ggplot(aes(x=Var1, y=Freq, weight=Freq, fill=Freq)) +
geom_col()+
geom_text(aes(label=Freq), hjust = -.1, size = 2.5) +
labs(
title="San Francisco Dispositions, 2016-2019",
x = "dispositions",
y = "frequency",
caption = "source: SF PD Arrest Data, 2016-2019")
top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo%>%
ggplot() +
geom_bar(aes(x=reorder(Var1, Freq), weight=Freq))+
labs(
title="San Francisco Dispositions, 2016-2019",
x = "dispositions",
y = "frequency",
caption = "source: SF PD Arrest Data, 2016-2019")
top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo%>%
ggplot() +
geom_bar(aes(x=reorder(Var1, Freq), weight=Freq))+
theme(minimal)+
labs(
title="San Francisco Dispositions, 2016-2019",
x = "dispositions",
y = "frequency",
caption = "source: SF PD Arrest Data, 2016-2019")
top_12_dispo <- as.data.frame(all_dispo) %>%
slice_max(all_dispo, n=12)
top_12_dispo%>%
ggplot() +
geom_bar(aes(x=reorder(Var1, Freq), weight=Freq))+
theme()+
labs(
title="San Francisco Dispositions, 2016-2019",
x = "dispositions",
y = "frequency",
caption = "source: SF PD Arrest Data, 2016-2019")
setwd("~/GitHub/Elizabeth_Alspach_jour472/final_project")
#census key
census_api_key("423292f0a0d4b5f0fe4ce722f283f6af07c21c84", install=TRUE, overwrite=TRUE)
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
#census key
census_api_key("423292f0a0d4b5f0fe4ce722f283f6af07c21c84", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
read.csv("Domestic Production &amp; Consumption.csv")
read.csv("domestic_production_consumption_carroll.csv") %>%
clean_names()
read.csv("domestic_production_consumption_carroll.csv") %>%
clean_names()
view(domestic_consumption_carroll)
domestic_consump_prod_carroll <- read.csv("domestic_production_consumption_carroll.csv") %>%
clean_names()
view(domestic_consump_prod_carroll)
domestic_consump_prod_carroll <- read.csv("domestic_production_consumption_carroll.csv") %>%
clean_names()
view(domestic_consump_prod_carroll)
employment_carroll <- read.csv("industry_employment_carroll.csv") %>%
clean_names()
view(employment_carroll)
acs_vars <- load_variables("acs5", year = 2020)
View(acs_vars)
