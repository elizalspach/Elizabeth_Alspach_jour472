read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
case_when("van_hollen" >= "chaffee")
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(results = case_when("van_hollen" >= "chaffee", "griffin", "wildman", "other_write_ins",
))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(results = case_when("van_hollen" >= "chaffee", "griffin", "wildman", "other_write_ins",
TRUE ~ sen_race_results ))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(results = case_when("van_hollen" >= "chaffee", "griffin", "wildman", "other_write_ins",
TRUE ~ results ))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(results = case_when("van_hollen" >= "chaffee", "griffin", "wildman", "other_write_ins",
TRUE ~ van_hollen))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number)) %>%
mutate(results = case_when("van_hollen" >= "chaffee", "griffin", "wildman", "other_write_ins",
TRUE ~ van_hollen))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(results = case_when(van_hollen > chaffee, griffin, wildman, other_write_ins,
TRUE ~ "van_hollen"))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
rename(chaffee = 2, van_hollen = 3, griffin = 4, wildman = 5) %>%
mutate(across(c(2:5), parse_number))
sen_race_results %>%
mutate(case_when(van_hollen > chaffee, griffin, wildman, other_write_ins == "Van Hollen",
TRUE ~ "van_hollen"))
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
select(jurisdiction, chris_van_hollen_democratic, chris_chaffee_republican) %>%
mutate(
senate_results = case_when(
chris_van_hollen_democratic >= chris_chaffee_republican ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_state_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
select(jurisdiction, chris_van_hollen_democratic, chris_chaffee_republican) %>%
mutate(
senate_results = case_when(
chris_van_hollen_democratic >= chris_chaffee_republican ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen > chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
select(jurisdiction, van_hollen_dem, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen_dem > chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
select(jurisdiction, chris_van_hollen, chris_chaffee) %>%
mutate(
senate_results = case_when(
chris_van_hollen >= chris_chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen >= chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen > chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen <= chaffee ~ "Van Hollen",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
van_hollen > chaffee ~ "Chaffee",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, van_hollen, chaffee) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee < van_hollen ~ "Chaffee",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee < van_hollen ~ "Chaffee",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee > van_hollen ~ "Chaffee",
TRUE ~ "Chris Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee > van_hollen ~ "Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee < van_hollen ~ "Chaffee"
)
view(sen_race_results)
glimpse(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
mutate(across(c(2:5), parse_number)) %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee < van_hollen ~ "Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
mutate(across(c(2:5), parse_number)) %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen < chaffee ~ "Van Hollen",
chaffee > van_hollen ~ "Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
mutate(across(c(2:5), parse_number)) %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen > chaffee ~ "Van Hollen",
chaffee < van_hollen ~ "Chaffee"
)
view(sen_race_results)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
mutate(across(c(2:5), parse_number)) %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen > chaffee ~ "Van Hollen",
chaffee > van_hollen ~ "Chaffee"
)
view(sen_race_results)
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
library(tidyverse)
library(tidycensus)
library(rvest)
library(janitor)
#census key
census_api_key("423292f0a0d4b5f0fe4ce722f283f6af07c21c84", install=TRUE, overwrite=TRUE)
readRenviron("~/.Renviron")
gov_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_results_2022_1.html"
#read in results as html table
gov_race_results <- gov_race_results %>%
read_html() %>%
html_table()
#extract dataframe, clean number columns, calculate pct on election day vote
gov_race_results <- gov_race_results[[1]] %>%
clean_names() %>%
mutate(across(c(3,4,5,7,8), parse_number)) %>%
mutate(pct_election_day = round(election_day/total*100,2)) %>%
slice(-7) %>%
arrange(pct_election_day) %>%
select(name, pct_election_day)
#load data
sen_race_results <- "https://elections.maryland.gov/elections/2022/general_results/gen_detail_results_2022_4_1.html"
sen_race_results <- sen_race_results %>%
read_html() %>%
html_table()
sen_race_results <- sen_race_results[[1]] %>%
clean_names() %>%
slice(-25) %>%
clean_names() %>%
mutate(across(c(2:5), parse_number)) %>%
rename(chaffee = 2, van_hollen = 3) %>%
select(jurisdiction, chaffee, van_hollen) %>%
mutate(
senate_results = case_when(
van_hollen > chaffee ~ "Van Hollen",
chaffee > van_hollen ~ "Chaffee"
)
view(sen_race_results)
#Van Hollen won in Anne Arundel, Baltimore City, Baltimore County, Charles, Frederick, Howard, Kent, Montgomery, Prince George's and Talbot counties.
#get the wealthiest county by median income
acs_vars <- load_variables("acs5", year=2020)
md <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020) %>%
arrange(desc(estimate))
View(md)
#get the wealthiest county by median income
acs_vars <- load_variables("acs5", year=2020)
md <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020) %>%
arrange(desc(estimate))
#howard county is the wealthiest county in maryland
sen_race_results_county <- sen_race_results %>%
mutate(van_hollen_pct = (van_hollen/(chaffee*van_hollen)*100))
sen_race_results_howard <- sen_race_results_county %>%
filter(jurisdiction == "Howard")
#get the wealthiest county by median income
acs_vars <- load_variables("acs5", year=2020)
md <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020) %>%
arrange(desc(estimate))
#howard county is the wealthiest county in maryland
sen_race_results_county <- sen_race_results %>%
mutate(van_hollen_pct = (van_hollen/(chaffee*van_hollen)*100))
sen_race_results_howard <- sen_race_results_county %>%
filter(jurisdiction == "Howard")
view(sen_race_results_howard)
#get the wealthiest county by median income
acs_vars <- load_variables("acs5", year=2020)
md <- get_acs(geography = "county",
variables = c(median_income = "B19013_001"),
state = "MD",
year = 2020) %>%
arrange(desc(estimate))
#howard county is the wealthiest county in maryland
sen_race_results_county <- sen_race_results %>%
mutate(van_hollen_pct = (van_hollen/(chaffee+van_hollen)*100))
sen_race_results_howard <- sen_race_results_county %>%
filter(jurisdiction == "Howard")
view(sen_race_results_howard)
